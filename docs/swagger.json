{
    "schemes": [
        "http",
        "https"
    ],
    "swagger": "2.0",
    "info": {
        "description": "云账单数据同步服务API文档\n支持火山云、阿里云等多云平台的账单数据自动同步到ClickHouse数据库",
        "title": "Goscan API",
        "termsOfService": "http://swagger.io/terms/",
        "contact": {
            "name": "API Support",
            "email": "support@goscan.com"
        },
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        },
        "version": "1.0"
    },
    "host": "localhost:8080",
    "basePath": "/",
    "paths": {
        "/health": {
            "get": {
                "description": "Perform comprehensive system health check including database connection, task manager status, etc. (Note: this endpoint is not under /api/v1 path)",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Health Check"
                ],
                "summary": "Perform health check",
                "responses": {
                    "200": {
                        "description": "Health check passed",
                        "schema": {
                            "$ref": "#/definitions/models.HealthCheckResponse"
                        }
                    },
                    "503": {
                        "description": "Service unhealthy",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/notifications/wechat": {
            "post": {
                "description": "Manually trigger WeChat Enterprise cost report notification, supports specifying analysis date, cloud provider list and alert threshold. Can be used for temporary notification needs outside of scheduled tasks.\n\n**请求示例：**\n```json\n{\n\"date\": \"2025-09-12\",\n\"providers\": [\"volcengine\", \"alicloud\"],\n\"alert_threshold\": 15.0,\n\"force_notify\": false,\n\"test_mode\": false\n}\n```\n\n**Field Descriptions:**\n- `date`: Analysis date, format YYYY-MM-DD, uses current date if not provided\n- `providers`: Cloud provider list, supports volcengine/alicloud/aws/azure/gcp\n- `alert_threshold`: Cost change alert threshold (percentage), range 0-100\n- `force_notify`: Whether to force send, ignores alert threshold when true\n- `test_mode`: Test mode, only tests connection without sending actual report when true",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Notification Management"
                ],
                "summary": "Manually trigger WeChat Enterprise notification",
                "parameters": [
                    {
                        "description": "WeChat notification trigger request parameters",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/models.WeChatNotificationRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Triggered successfully",
                        "schema": {
                            "$ref": "#/definitions/models.MessageResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request parameters or WeChat notification not enabled",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/notifications/wechat/status": {
            "get": {
                "description": "Returns detailed information about WeChat Enterprise notification feature configuration status, connection status, recent notification history, etc.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Notification Management"
                ],
                "summary": "Get WeChat Enterprise notification status",
                "parameters": [
                    {
                        "maximum": 50,
                        "minimum": 1,
                        "type": "integer",
                        "default": 10,
                        "description": "History record count limit",
                        "name": "history_limit",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "default": true,
                        "description": "Whether to include detailed configuration",
                        "name": "include_config",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Status information retrieved successfully",
                        "schema": {
                            "$ref": "#/definitions/models.WeChatNotificationStatusResponse"
                        }
                    }
                }
            }
        },
        "/notifications/wechat/test": {
            "post": {
                "description": "Send test message to WeChat Enterprise group to verify correctness and connectivity of Webhook URL configuration, will not send actual cost reports",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Notification Management"
                ],
                "summary": "Test WeChat Enterprise Webhook connection",
                "parameters": [
                    {
                        "description": "Test request parameters (optional)",
                        "name": "request",
                        "in": "body",
                        "schema": {
                            "$ref": "#/definitions/models.WeChatTestRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Connection test successful",
                        "schema": {
                            "$ref": "#/definitions/models.MessageResponse"
                        }
                    },
                    "400": {
                        "description": "WeChat notification not enabled or Webhook URL not configured",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Connection test failed or internal server error",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/scheduler/jobs": {
            "get": {
                "description": "Returns information of all configured scheduled jobs",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Schedule Management"
                ],
                "summary": "Get scheduled job list",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/models.JobListResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "description": "Create a new scheduled sync job",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Schedule Management"
                ],
                "summary": "Create scheduled job",
                "parameters": [
                    {
                        "description": "Scheduled job request parameters",
                        "name": "job",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/models.JobRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/models.MessageResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/scheduler/jobs/{id}": {
            "get": {
                "description": "Returns detailed information of scheduled job by job ID",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Schedule Management"
                ],
                "summary": "Get specific scheduled job",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Job ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/models.JobResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    }
                }
            },
            "put": {
                "description": "Update scheduled job configuration for specified ID",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Schedule Management"
                ],
                "summary": "Update scheduled job",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Job ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Scheduled job update parameters",
                        "name": "job",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/models.JobRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/models.MessageResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "description": "Delete specified scheduled job",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Schedule Management"
                ],
                "summary": "Delete scheduled job",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Job ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/models.MessageResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/scheduler/jobs/{id}/trigger": {
            "post": {
                "description": "Immediately execute specified scheduled job without waiting for next scheduled time",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Schedule Management"
                ],
                "summary": "Manually trigger scheduled job",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Job ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/models.MessageResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/scheduler/metrics": {
            "get": {
                "description": "Returns performance metrics information of scheduler, including task execution statistics, success rate, etc.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Schedule Management"
                ],
                "summary": "Get scheduler performance metrics",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/models.SchedulerMetricsResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/scheduler/status": {
            "get": {
                "description": "Returns running status information of the task scheduler",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Schedule Management"
                ],
                "summary": "Get scheduler status",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/models.SchedulerStatus"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/sync": {
            "get": {
                "description": "Returns summary status information of all current data sync tasks, including running task count, total task count and other statistics",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Data Sync"
                ],
                "summary": "Get data sync status",
                "responses": {
                    "200": {
                        "description": "Sync status retrieved successfully",
                        "schema": {
                            "$ref": "#/definitions/models.SyncStatusResponse"
                        }
                    }
                }
            },
            "post": {
                "description": "Immediately trigger billing data sync operation for specified cloud provider. Supports multiple cloud providers like Volcengine, Alibaba Cloud, etc.\nSupports configuring sync mode, time range, granularity and other parameters.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Data Sync"
                ],
                "summary": "Manually trigger billing data sync",
                "parameters": [
                    {
                        "description": "Sync request parameters including cloud provider, sync mode, billing period range and other configurations",
                        "name": "sync",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/models.SyncTriggerRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Sync task triggered successfully",
                        "schema": {
                            "$ref": "#/definitions/models.MessageResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request parameters or missing cloud provider configuration",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/sync/history": {
            "get": {
                "description": "Returns execution records of historical sync tasks, including successful and failed tasks, as well as detailed information of each sync",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Data Sync"
                ],
                "summary": "Get sync history records",
                "parameters": [
                    {
                        "maximum": 1000,
                        "minimum": 1,
                        "type": "integer",
                        "default": 100,
                        "description": "Limit of returned records",
                        "name": "limit",
                        "in": "query"
                    },
                    {
                        "enum": [
                            "volcengine",
                            "alicloud",
                            "aws",
                            "azure",
                            "gcp"
                        ],
                        "type": "string",
                        "description": "Filter records by specified cloud provider",
                        "name": "provider",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "History records retrieved successfully",
                        "schema": {
                            "$ref": "#/definitions/models.SyncHistoryResponse"
                        }
                    }
                }
            }
        },
        "/system/config": {
            "get": {
                "description": "Returns system configuration information with sensitive data masked",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "System Management"
                ],
                "summary": "Get system configuration",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/models.ConfigResponse"
                        }
                    }
                }
            },
            "put": {
                "description": "This endpoint does not support configuration updates for security reasons",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "System Management"
                ],
                "summary": "Update system configuration",
                "responses": {
                    "501": {
                        "description": "Not Implemented",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/system/status": {
            "get": {
                "description": "Returns system information including service running status, task statistics and scheduler status",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "System Management"
                ],
                "summary": "Get system status",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/models.SystemStatus"
                        }
                    }
                }
            }
        },
        "/tasks": {
            "get": {
                "description": "Returns detailed information of all tasks in the system, including running, completed and failed tasks",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Task Management"
                ],
                "summary": "Get all task list",
                "responses": {
                    "200": {
                        "description": "Task list retrieved successfully",
                        "schema": {
                            "$ref": "#/definitions/models.TaskListResponse"
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "description": "Create and asynchronously execute a new cloud provider billing data sync task. Supports multiple cloud providers like Volcengine, Alibaba Cloud, etc.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Task Management"
                ],
                "summary": "Create new sync task",
                "parameters": [
                    {
                        "description": "Task request parameters including task type, cloud provider, sync configuration, etc.",
                        "name": "task",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/models.TaskRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Task created successfully",
                        "schema": {
                            "$ref": "#/definitions/models.MessageResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request parameters",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/tasks/{id}": {
            "get": {
                "description": "Get detailed information of a specific task by task ID, including task status, execution progress, error information, etc.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Task Management"
                ],
                "summary": "Get specific task details",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Unique task identifier ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Task details retrieved successfully",
                        "schema": {
                            "$ref": "#/definitions/models.TaskResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid task ID",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Task not found",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "description": "Cancel running tasks or delete completed task records. Running tasks will be forcibly stopped.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Task Management"
                ],
                "summary": "Cancel or delete task",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Unique task identifier ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Task cancelled/deleted successfully",
                        "schema": {
                            "$ref": "#/definitions/models.MessageResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid task ID",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Task not found or cannot be cancelled",
                        "schema": {
                            "$ref": "#/definitions/models.ErrorResponse"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "goscan_pkg_models.ProviderConfig": {
            "type": "object",
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "example": true
                },
                "endpoint": {
                    "type": "string",
                    "example": "ecs.cn-hangzhou.aliyuncs.com"
                },
                "has_credentials": {
                    "description": "Note: AccessKey and SecretKey are masked for security",
                    "type": "boolean",
                    "example": true
                },
                "host": {
                    "type": "string",
                    "example": "billing.volcengineapi.com"
                },
                "region": {
                    "type": "string",
                    "example": "cn-north-1"
                },
                "timeout": {
                    "type": "integer",
                    "example": 30
                }
            }
        },
        "models.AppConfig": {
            "type": "object",
            "properties": {
                "log_file": {
                    "type": "string"
                },
                "log_level": {
                    "type": "string",
                    "example": "info"
                }
            }
        },
        "models.ClickHouseConfig": {
            "type": "object",
            "properties": {
                "cluster": {
                    "type": "string",
                    "example": "my_cluster"
                },
                "database": {
                    "type": "string",
                    "example": "default"
                },
                "hosts": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "example": [
                        "localhost"
                    ]
                },
                "port": {
                    "type": "integer",
                    "example": 9000
                },
                "protocol": {
                    "type": "string",
                    "example": "native"
                },
                "username": {
                    "type": "string",
                    "example": "default"
                }
            }
        },
        "models.CloudProviderConfig": {
            "type": "object",
            "properties": {
                "alicloud": {
                    "$ref": "#/definitions/goscan_pkg_models.ProviderConfig"
                },
                "aws": {
                    "$ref": "#/definitions/goscan_pkg_models.ProviderConfig"
                },
                "azure": {
                    "$ref": "#/definitions/goscan_pkg_models.ProviderConfig"
                },
                "gcp": {
                    "$ref": "#/definitions/goscan_pkg_models.ProviderConfig"
                },
                "volcengine": {
                    "$ref": "#/definitions/goscan_pkg_models.ProviderConfig"
                }
            }
        },
        "models.ConfigResponse": {
            "type": "object",
            "properties": {
                "app": {
                    "$ref": "#/definitions/models.AppConfig"
                },
                "clickhouse": {
                    "$ref": "#/definitions/models.ClickHouseConfig"
                },
                "cloud_providers": {
                    "$ref": "#/definitions/models.CloudProviderConfig"
                }
            }
        },
        "models.ErrorResponse": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer",
                    "example": 400
                },
                "details": {
                    "type": "string",
                    "example": "provider字段不能为空"
                },
                "error": {
                    "type": "boolean",
                    "example": true
                },
                "message": {
                    "type": "string",
                    "example": "参数验证失败"
                }
            }
        },
        "models.HealthCheckResponse": {
            "type": "object",
            "properties": {
                "checks": {
                    "type": "object",
                    "additionalProperties": true
                },
                "status": {
                    "type": "string",
                    "example": "healthy"
                },
                "timestamp": {
                    "type": "string",
                    "example": "2025-09-11T08:13:24Z"
                }
            }
        },
        "models.JobListResponse": {
            "type": "object",
            "properties": {
                "count": {
                    "type": "integer",
                    "example": 3
                },
                "jobs": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/models.JobResponse"
                    }
                }
            }
        },
        "models.JobRequest": {
            "type": "object",
            "required": [
                "cron_expr",
                "name",
                "provider",
                "task_type"
            ],
            "properties": {
                "cron_expr": {
                    "type": "string",
                    "example": "0 2 * * *"
                },
                "description": {
                    "type": "string",
                    "example": "每日凌晨2点同步火山云账单"
                },
                "enabled": {
                    "type": "boolean",
                    "example": true
                },
                "name": {
                    "type": "string",
                    "example": "daily_volcengine_sync"
                },
                "parameters": {
                    "type": "object",
                    "additionalProperties": true
                },
                "provider": {
                    "type": "string",
                    "example": "volcengine"
                },
                "task_type": {
                    "type": "string",
                    "example": "sync"
                }
            }
        },
        "models.JobResponse": {
            "type": "object",
            "properties": {
                "created_at": {
                    "type": "string",
                    "example": "2025-09-11T08:13:24Z"
                },
                "cron_expr": {
                    "type": "string",
                    "example": "0 2 * * *"
                },
                "description": {
                    "type": "string",
                    "example": "每日凌晨2点同步火山云账单"
                },
                "enabled": {
                    "type": "boolean",
                    "example": true
                },
                "id": {
                    "type": "string",
                    "example": "job_123456"
                },
                "last_run": {
                    "type": "string",
                    "example": "2025-09-11T02:00:00Z"
                },
                "name": {
                    "type": "string",
                    "example": "daily_volcengine_sync"
                },
                "next_run": {
                    "type": "string",
                    "example": "2025-09-12T02:00:00Z"
                },
                "parameters": {
                    "type": "object",
                    "additionalProperties": true
                },
                "provider": {
                    "type": "string",
                    "example": "volcengine"
                },
                "task_type": {
                    "type": "string",
                    "example": "sync"
                },
                "updated_at": {
                    "type": "string",
                    "example": "2025-09-11T08:13:24Z"
                }
            }
        },
        "models.MessageResponse": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string",
                    "example": "操作成功"
                },
                "success": {
                    "type": "boolean",
                    "example": true
                }
            }
        },
        "models.SchedulerMetricsResponse": {
            "type": "object",
            "properties": {
                "active_jobs": {
                    "type": "integer",
                    "example": 8
                },
                "inactive_jobs": {
                    "type": "integer",
                    "example": 2
                },
                "scheduler_status": {
                    "$ref": "#/definitions/models.SchedulerStatus"
                },
                "timestamp": {
                    "type": "string",
                    "example": "2025-09-11T08:13:24Z"
                },
                "total_jobs": {
                    "type": "integer",
                    "example": 10
                },
                "uptime": {
                    "type": "string",
                    "example": "3h45m"
                }
            }
        },
        "models.SchedulerStatus": {
            "type": "object",
            "properties": {
                "entries": {
                    "type": "integer",
                    "example": 3
                },
                "job_count": {
                    "type": "integer",
                    "example": 3
                },
                "running": {
                    "type": "boolean",
                    "example": true
                },
                "timestamp": {
                    "type": "string",
                    "example": "2025-09-11T08:13:24Z"
                }
            }
        },
        "models.SyncHistoryEntry": {
            "type": "object",
            "properties": {
                "bill_period": {
                    "type": "string",
                    "example": "2025-09"
                },
                "completed_at": {
                    "type": "string",
                    "example": "2025-09-11T08:15:29Z"
                },
                "duration": {
                    "type": "integer",
                    "example": 125
                },
                "error_count": {
                    "type": "integer",
                    "example": 0
                },
                "id": {
                    "type": "string",
                    "example": "sync_123456"
                },
                "message": {
                    "type": "string",
                    "example": "同步完成"
                },
                "provider": {
                    "type": "string",
                    "example": "volcengine"
                },
                "record_count": {
                    "type": "integer",
                    "example": 1500
                },
                "started_at": {
                    "type": "string",
                    "example": "2025-09-11T08:13:24Z"
                },
                "status": {
                    "type": "string",
                    "example": "completed"
                }
            }
        },
        "models.SyncHistoryResponse": {
            "type": "object",
            "properties": {
                "count": {
                    "type": "integer",
                    "example": 10
                },
                "history": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/models.SyncHistoryEntry"
                    }
                }
            }
        },
        "models.SyncStatusResponse": {
            "type": "object",
            "properties": {
                "completed_at": {
                    "type": "string"
                },
                "error_count": {
                    "type": "integer",
                    "example": 0
                },
                "message": {
                    "type": "string",
                    "example": "同步进行中..."
                },
                "progress": {
                    "type": "number",
                    "example": 75.5
                },
                "provider": {
                    "type": "string",
                    "example": "volcengine"
                },
                "record_count": {
                    "type": "integer",
                    "example": 1500
                },
                "started_at": {
                    "type": "string",
                    "example": "2025-09-11T08:13:24Z"
                },
                "status": {
                    "type": "string",
                    "example": "running"
                }
            }
        },
        "models.SyncTriggerRequest": {
            "type": "object",
            "required": [
                "provider"
            ],
            "properties": {
                "bill_period": {
                    "type": "string",
                    "example": "2025-09"
                },
                "force": {
                    "type": "boolean",
                    "example": false
                },
                "parameters": {
                    "type": "object",
                    "additionalProperties": true
                },
                "provider": {
                    "type": "string",
                    "example": "volcengine"
                }
            }
        },
        "models.SystemStatus": {
            "type": "object",
            "properties": {
                "scheduler": {
                    "$ref": "#/definitions/models.SchedulerStatus"
                },
                "service": {
                    "type": "string",
                    "example": "goscan"
                },
                "status": {
                    "type": "string",
                    "example": "running"
                },
                "tasks": {
                    "$ref": "#/definitions/models.TasksStatus"
                },
                "timestamp": {
                    "type": "string",
                    "example": "2025-09-11T08:13:24Z"
                },
                "uptime": {
                    "type": "integer",
                    "example": 3600
                },
                "version": {
                    "type": "string",
                    "example": "1.0.0"
                }
            }
        },
        "models.TaskListResponse": {
            "type": "object",
            "properties": {
                "count": {
                    "type": "integer",
                    "example": 5
                },
                "tasks": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/models.TaskResponse"
                    }
                }
            }
        },
        "models.TaskRequest": {
            "type": "object",
            "required": [
                "name",
                "provider",
                "type"
            ],
            "properties": {
                "description": {
                    "type": "string",
                    "example": "同步火山云账单数据"
                },
                "name": {
                    "type": "string",
                    "example": "volcengine_sync_task"
                },
                "parameters": {
                    "type": "object",
                    "additionalProperties": true
                },
                "provider": {
                    "type": "string",
                    "example": "volcengine"
                },
                "schedule": {
                    "type": "string",
                    "example": "0 2 * * *"
                },
                "type": {
                    "type": "string",
                    "example": "sync"
                }
            }
        },
        "models.TaskResponse": {
            "type": "object",
            "properties": {
                "completed_at": {
                    "type": "string",
                    "example": "2025-09-11T08:13:30Z"
                },
                "created_at": {
                    "type": "string",
                    "example": "2025-09-11T08:13:24Z"
                },
                "description": {
                    "type": "string",
                    "example": "同步火山云账单数据"
                },
                "id": {
                    "type": "string",
                    "example": "task_123456"
                },
                "name": {
                    "type": "string",
                    "example": "volcengine_sync_task"
                },
                "parameters": {
                    "type": "object",
                    "additionalProperties": true
                },
                "provider": {
                    "type": "string",
                    "example": "volcengine"
                },
                "schedule": {
                    "type": "string",
                    "example": "0 2 * * *"
                },
                "started_at": {
                    "type": "string",
                    "example": "2025-09-11T08:13:24Z"
                },
                "status": {
                    "type": "string",
                    "example": "running"
                },
                "type": {
                    "type": "string",
                    "example": "sync"
                },
                "updated_at": {
                    "type": "string",
                    "example": "2025-09-11T08:13:24Z"
                }
            }
        },
        "models.TasksStatus": {
            "type": "object",
            "properties": {
                "running": {
                    "type": "integer",
                    "example": 2
                },
                "total": {
                    "type": "integer",
                    "example": 10
                }
            }
        },
        "models.WeChatNotificationHistoryEntry": {
            "type": "object",
            "properties": {
                "duration": {
                    "description": "执行耗时",
                    "type": "string",
                    "example": "2m6s"
                },
                "end_time": {
                    "description": "结束时间",
                    "type": "string",
                    "example": "2025-09-12T08:15:30Z"
                },
                "error": {
                    "description": "错误信息",
                    "type": "string",
                    "example": "连接超时"
                },
                "id": {
                    "description": "任务ID",
                    "type": "string",
                    "example": "task_123456"
                },
                "message": {
                    "description": "执行消息",
                    "type": "string",
                    "example": "通知发送成功"
                },
                "records_processed": {
                    "description": "处理记录数",
                    "type": "integer",
                    "example": 1500
                },
                "start_time": {
                    "description": "开始时间",
                    "type": "string",
                    "example": "2025-09-12T08:13:24Z"
                },
                "status": {
                    "description": "执行状态",
                    "type": "string",
                    "example": "completed"
                }
            }
        },
        "models.WeChatNotificationRequest": {
            "description": "企业微信费用报告通知触发请求，支持指定分析日期、云服务商和告警阈值",
            "type": "object",
            "properties": {
                "alert_threshold": {
                    "description": "费用变化告警阈值（百分比），当费用变化超过此值时触发告警，默认使用系统配置值，范围：0-100",
                    "type": "number",
                    "maximum": 100,
                    "minimum": 0,
                    "example": 10
                },
                "date": {
                    "description": "分析日期，格式：YYYY-MM-DD，默认为当前日期。示例：2025-09-12",
                    "type": "string",
                    "example": "2025-09-12"
                },
                "force_notify": {
                    "description": "强制发送通知，设为true时即使未达到告警阈值也会发送通知，默认为false",
                    "type": "boolean",
                    "example": false
                },
                "providers": {
                    "description": "要分析的云服务商列表，支持：volcengine（火山云）、alicloud（阿里云）、aws、azure、gcp，默认为 [\"volcengine\", \"alicloud\"]",
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "example": [
                        "volcengine",
                        "alicloud"
                    ]
                },
                "test_mode": {
                    "description": "测试模式，设为true时仅测试企业微信连接而不发送实际的费用报告，默认为false",
                    "type": "boolean",
                    "example": false
                }
            }
        },
        "models.WeChatNotificationStatusResponse": {
            "type": "object",
            "properties": {
                "alert_threshold": {
                    "description": "告警阈值",
                    "type": "number",
                    "example": 10
                },
                "enabled": {
                    "description": "微信通知功能是否启用",
                    "type": "boolean",
                    "example": true
                },
                "executor_enabled": {
                    "description": "执行器是否启用",
                    "type": "boolean",
                    "example": true
                },
                "executor_status": {
                    "description": "执行器状态",
                    "type": "string",
                    "example": "ready"
                },
                "history_count": {
                    "description": "历史记录数量",
                    "type": "integer",
                    "example": 5
                },
                "max_retries": {
                    "description": "最大重试次数",
                    "type": "integer",
                    "example": 3
                },
                "mention_users": {
                    "description": "提及用户列表",
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "example": [
                        "user1",
                        "user2"
                    ]
                },
                "recent_history": {
                    "description": "最近通知历史",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/models.WeChatNotificationHistoryEntry"
                    }
                },
                "retry_delay": {
                    "description": "重试延迟时间（秒）",
                    "type": "integer",
                    "example": 5
                },
                "timestamp": {
                    "description": "状态查询时间戳",
                    "type": "string",
                    "example": "2025-09-12T08:13:24Z"
                },
                "webhook_configured": {
                    "description": "Webhook是否已配置",
                    "type": "boolean",
                    "example": true
                },
                "webhook_url": {
                    "description": "脱敏后的Webhook URL",
                    "type": "string",
                    "example": "https://qyapi***webhook"
                }
            }
        },
        "models.WeChatTestRequest": {
            "description": "企业微信Webhook连接测试请求，用于验证Webhook URL的可用性",
            "type": "object",
            "properties": {
                "custom_message": {
                    "description": "自定义测试消息内容，最大长度500字符，默认使用系统预设的测试消息",
                    "type": "string",
                    "maxLength": 500,
                    "example": "这是一条来自费用监控系统的测试消息"
                },
                "timeout": {
                    "description": "连接超时时间（秒），范围1-60秒，默认为10秒",
                    "type": "integer",
                    "maximum": 60,
                    "minimum": 1,
                    "example": 10
                }
            }
        }
    }
}